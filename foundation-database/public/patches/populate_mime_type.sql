UPDATE file
   SET file_mime_type = CASE lower(substring(file_title from '\.[^.]*$'))
                           WHEN '.abw'   THEN 'application/x-abiword'
                           WHEN '.bmp'   THEN 'image/bmp'
                           WHEN '.cc'    THEN 'text/x-c++src'
                           WHEN '.cpp'   THEN 'text/x-c++src'
                           WHEN '.csv'   THEN 'text/csv'
                           WHEN '.cxx'   THEN 'text/x-c++src'
                           WHEN '.c++'   THEN 'text/x-c++src'
                           WHEN '.dib'   THEN 'image/bmp'
                           WHEN '.diff'  THEN 'text/x-patch'
                           WHEN '.doc'   THEN 'application/msword'
                           WHEN '.docx'  THEN 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'
                           WHEN '.dwg'   THEN 'image/vnd.dwg'
                           WHEN '.eml'   THEN 'message/rfc822'
                           WHEN '.exe'   THEN 'application/x-ms-dos-executable'
                           WHEN '.gif'   THEN 'image/gif'
                           WHEN '.gz'    THEN 'application/gzip'
                           WHEN '.h'     THEN 'text/x-chdr'
                           WHEN '.htm'   THEN 'text/html'
                           WHEN '.html'  THEN 'text/html'
                           WHEN '.iges'  THEN 'model/iges'
                           WHEN '.igs'   THEN 'model/iges'
                           WHEN '.jpe'   THEN 'image/jpeg'
                           WHEN '.jpeg'  THEN 'image/jpeg'
                           WHEN '.jpg'   THEN 'image/jpeg'
                           WHEN '.js'    THEN 'application/javascript'
                           WHEN '.jsm'   THEN 'application/javascript'
                           WHEN '.key'   THEN 'application/x-iwork-keynote-sffkey'
                           WHEN '.log'   THEN 'text/x-log'
                           WHEN '.mjs'   THEN 'application/javascript'
                           WHEN '.mql'   THEN 'text/plain'
                           WHEN '.moov'  THEN 'video/quicktime'
                           WHEN '.mov'   THEN 'video/quicktime'
                           WHEN '.msg'   THEN 'application/vnd.ms-outlook'
                           WHEN '.ods'   THEN 'application/vnd.oasis.opendocument.spreadsheet'
                           WHEN '.odt'   THEN 'application/vnd.oasis.opendocument.text'
                           WHEN '.p'     THEN 'text/x-pascal'
                           WHEN '.pas'   THEN 'text/x-pascal'
                           WHEN '.patch' THEN 'text/x-patch'
                           WHEN '.pdf'   THEN 'application/pdf'
                           WHEN '.plist' THEN 'application/xml'
                           WHEN '.png'   THEN 'image/png'
                           WHEN '.po'    THEN 'text/x-gettext-translation'
                           WHEN '.pps'   THEN 'application/vnd.ms-powerpoint'
                           WHEN '.ppt'   THEN 'application/vnd.ms-powerpoint'
                           WHEN '.pptx'  THEN 'application/vnd.openxmlformats-officedocument.presentationml.presentation'
                           WHEN '.ppz'   THEN 'application/vnd.ms-powerpoint'
                           WHEN '.ps'    THEN 'application/postscript'
                           WHEN '.qt'    THEN 'video/quicktime'
                           WHEN '.qtvr'  THEN 'video/quicktime'
                           WHEN '.rar'   THEN 'application/vnd.rar'
                           WHEN '.rng'   THEN 'application/xml'
                           WHEN '.rtf'   THEN 'application/rtf'
                           WHEN '.sql'   THEN 'application/sql'
                           WHEN '.tgz'   THEN 'application/x-compressed-tar'
                           WHEN '.tif'   THEN 'image/tiff'
                           WHEN '.tiff'  THEN 'image/tiff'
                           WHEN '.txt'   THEN 'text/plain'
                           WHEN '.wav'   THEN 'audio/x-wav'
                           WHEN '.wmv'   THEN 'video/x-ms-wmv'
                           WHEN '.xbl'   THEN 'application/xml'
                           WHEN '.xla'   THEN 'application/vnd.ms-excel'
                           WHEN '.xlc'   THEN 'application/vnd.ms-excel'
                           WHEN '.xld'   THEN 'application/vnd.ms-excel'
                           WHEN '.xll'   THEN 'application/vnd.ms-excel'
                           WHEN '.xlm'   THEN 'application/vnd.ms-excel'
                           WHEN '.xls'   THEN 'application/vnd.ms-excel'
                           WHEN '.xlsm'  THEN 'application/vnd.ms-excel.sheet.macroEnabled.12'
                           WHEN '.xlsx'  THEN 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'
                           WHEN '.xlt'   THEN 'application/vnd.ms-excel'
                           WHEN '.xlw'   THEN 'application/vnd.ms-excel'
                           WHEN '.xm'    THEN 'audio/x-xm'
                           WHEN '.xml'   THEN 'application/xml'
                           WHEN '.xsd'   THEN 'application/xml'
                           WHEN '.zabw'  THEN 'application/x-abiword'
                           WHEN '.zip'   THEN 'application/zip'
                           ELSE 'application/octet-stream'
                    END
  WHERE COALESCE(file_mime_type, '') IN ('', 'application/octet-stream');
